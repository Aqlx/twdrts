"use strict";var apAtttack=20,reportArRound=function(e,t,n){var c=document.getElementById("r"+e),a=document.getElementById("rs"+e),o=getInputAp(e);if(n){for(var l=0;n<o;)n+=t,l++;a.innerHTML=l+" / "}else a.innerHTML="";for(var r=0,u=0;u<o;)u+=t,r++;c.innerHTML=r},reportApPerTurn=function(e,t,n){document.getElementById("apt"+e).innerHTML=t+n},reportApReceived=function(e,t){var n=document.getElementById("sap"+e);n.innerHTML=t?"(+ "+t+")":""},report=function(e,t,n){reportArRound(e,t,n),reportApPerTurn(e,t,n),reportApReceived(e,n)},calculateAp=function(e){report(e,calculateNode(e),getApReceived(e,20)+getApReceived(e,40)+getApSpecialFast(e)+getApSpecialTough(e))},calculateNode=function(e){return Math.round((apAtttack+getApFromLeader(e)+getApWeapon(e))*getMethod())},calculateAll=function(){for(var e=0;e<=4;e++)calculateAp(e)},getMethod=function(){return parseFloat(document.querySelector('input[name="method"]:checked').value)},getApFromLeader=function(e){var t=void 0,n=0,c=document.getElementById("t"+e).value,a=document.querySelector('input[name="leader"]:checked').value;return t="fast"===c||"strong"===c?"melee":"alert"===c||"tough"===c?"ranged":void 0,"all"!==a&&c!==a&&t!==a||(n=parseInt(document.querySelector('input[name="leader-ap"]:checked').value,10)),n},getApWeapon=function(e){return parseInt(document.getElementById("w"+e).value,10)},getInputAp=function(e){var t=document.getElementById("ipt-ap"+e).value||0;return parseInt(t,10)},getApSpecialFast=function(e){for(var t=0,n=document.querySelectorAll('input[name="special-apf"]:checked'),c=getInputAp(e),a=0;a<n.length;a++)t+=parseInt(n[a].value,10);return Math.round(c*t/100)},getApSpecialTough=function(e){var t=0,n=document.getElementById("chk-art"+e),c=getInputAp(e);return n.checked&&(t=Math.round(c*parseInt(n.value,10)/100)),t},getApReceived=function(e,t){var n=0,c=document.getElementById("chk-apr"+t+"-"+e),a=getInputAp(e);return c.checked&&(n=Math.round(a*parseInt(t,10)/100)),n},eMethods=document.querySelectorAll('input[name="method"]'),eLeaders=document.querySelectorAll('input[name="leader"]'),eLeaderAPs=document.querySelectorAll('input[name="leader-ap"]'),eWeaponAPs=document.querySelectorAll('select[name="weapon-ap"]'),eSpecialAPfs=document.querySelectorAll('input[name="special-apf"]'),eSpecialAPts=document.querySelectorAll('input[name="special-apt"]'),eReceived20=document.querySelectorAll('input[name="apr20"]'),eReceived40=document.querySelectorAll('input[name="apr40"]'),eSelectTraits=document.querySelectorAll('select[name="triat"]'),eInputAPs=document.querySelectorAll('input[name="input-ap"]');Array.prototype.slice.call(eMethods).concat(Array.prototype.slice.call(eLeaders),Array.prototype.slice.call(eLeaderAPs),Array.prototype.slice.call(eSpecialAPfs)).forEach(function(e){e.onchange=function(){calculateAll()}});for(var _loop=function(e){eSelectTraits[e].onchange=function(){var t=document.getElementById("spf"+e),n=document.getElementById("spt"+e),c=document.getElementById("chk-arf"+e),a=document.getElementById("chk-art"+e);c.checked=!1,a.checked=!1,{fast:function(){t.classList.remove("hide"),n.classList.add("hide")},strong:function(){t.classList.add("hide"),n.classList.add("hide")},alert:function(){t.classList.add("hide"),n.classList.add("hide")},tough:function(){t.classList.add("hide"),n.classList.remove("hide")}}[this.value](),calculateAll()}},i=0;i<eSelectTraits.length;i++)_loop(i);for(var _loop2=function(e){eWeaponAPs[e].onchange=function(){calculateAp(e)}},i=0;i<eWeaponAPs.length;i++)_loop2(i);for(var _loop3=function(e){eInputAPs[e].oninput=function(){this.value.length>3&&(this.value=this.value.slice(0,3))},eInputAPs[e].onclick=function(){this.select()},eInputAPs[e].onkeyup=function(){calculateAp(e)}},i=0;i<eInputAPs.length;i++)_loop3(i);for(var _loop4=function(e){eSpecialAPts[e].onchange=function(){calculateAp(e)}},i=0;i<eSpecialAPts.length;i++)_loop4(i);for(var _loop5=function(e){eReceived20[e].onchange=function(){calculateAp(e)}},i=0;i<eReceived20.length;i++)_loop5(i);for(var _loop6=function(e){eReceived40[e].onchange=function(){calculateAp(e)}},i=0;i<eReceived40.length;i++)_loop6(i);calculateAll();