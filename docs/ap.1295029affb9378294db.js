var ap=function(t){var e={};function a(s){if(e[s])return e[s].exports;var l=e[s]={i:s,l:!1,exports:{}};return t[s].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)a.d(s,l,function(e){return t[e]}.bind(null,l));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=6)}([function(t,e,a){"use strict";const s={Modal:class{constructor(t){this.el=document.getElementById(t)}show(){this.el.classList.add("md-show")}hide(){this.el.classList.remove("md-show")}toggle(){this.el.classList.toggle("md-show")}},Table:class{constructor(t){(this.el=document.createElement("table")).className=t}addRow(t){const e=document.createElement("tr");for(let a=0;a<t.length;a++)e.appendChild(t[a]);return this.el.appendChild(e),this}addCol(t){const e=document.createElement("td");return t.hasOwnProperty("class")&&(e.className=t.class),t.hasOwnProperty("id")&&(e.id=t.id),t.hasOwnProperty("text")&&(e.innerHTML=t.text),t.hasOwnProperty("child")&&e.appendChild(t.child),t.hasOwnProperty("rowspan")&&e.setAttribute("rowspan",t.rowspan),t.hasOwnProperty("colspan")&&e.setAttribute("colspan",t.colspan),e}},Tab:class{constructor(t){this.el=document.getElementById(t),this.tabs=this.el.querySelectorAll("[data-tab]"),this.tabContents=this.el.querySelectorAll("[data-tab-content]"),this.iniEvent()}iniEvent(){for(let t=0;t<this.tabs.length;t++)this.tabs[t].onclick=()=>{for(let t=0;t<this.tabs.length;t++)this.tabs[t].classList.remove("active");const e=this.tabs[t].dataset.tab;this.tabs[t].classList.add("active"),this.showContent(e)}}showContent(t){for(let t=0;t<this.tabContents.length;t++)this.tabContents[t].classList.remove("show");document.querySelector(`[data-tab-content=${t}]`).classList.add("show")}},SelectTraits:class{constructor(t){this.el=document.getElementById(t),this.bottons=this.el.querySelectorAll("button"),this.active=[],[].forEach.call(this.bottons,t=>{t.onclick=()=>{const e=t.dataset.trait;if(e.match(/all|melee|range/)){let t=this.active.length;for(;t--;)this.remove(this.active[t])}else{if(!e.match(/fast|strong|alert|tough/))return!1;{let t=this.active.length;for(;t--;)this.active[t].match(/fast|strong|alert|tough/)||this.remove(this.active[t])}}this.toggle(t)}})}toggle(t){const e=t.dataset.trait;t.classList.toggle("active");const a=this.active.indexOf(e);return-1==a?this.active.push(e):this.active.splice(a,1),this}remove(t){const e=this.active.indexOf(t),a=this.el.querySelector(`[data-trait=${t}]`);this.active.splice(e,1),a.classList.remove("active")}}};e.a=s},,,,,,function(t,e,a){"use strict";a.r(e),a.d(e,"AdrenalineRush",(function(){return r}));var s=a(0);a(7);const l={apAtttack:20,methodAPMultiple:{atk:1,def:1.4},bg:{fast:"#c18c00",strong:"#415c1c",alert:"#981014",tough:"#003466"}},r={state:{leaderAP:0,towerAP:0,member:[]},init(){this.defineEl().iniEvents().iniModal().mergeOptions().bootstrap().calculateAll()},mergeOptions(){return this.state={...this.state,method:"atk",member:[{trait:"fast"},{trait:"strong"},{trait:"alert"},{trait:"tough"},{trait:"fast"}]},this},defineEl(){return this.el={modalSetAPBuff:new s.a.Modal("modal-set-ap-buff"),leaderTrait:new s.a.SelectTraits("leader-trait"),towerTrait:new s.a.SelectTraits("tower-trait"),selectTraits:document.querySelectorAll('[data-el="select-trait"]'),showBuffLeader:document.getElementById("show-buff-leader"),showBuffTower:document.getElementById("show-buff-tower")},this},iniEvents(){for(let t=0;t<this.el.selectTraits.length;t++){const e=this.el.selectTraits[t].nextElementSibling;this.el.selectTraits[t].onclick=()=>{e.classList.toggle("show")};const a=e.querySelectorAll("li");for(let s=0;s<a.length;s++)a[s].onclick=()=>{const l=a[s].dataset.trait;this.state.member[t].trait!==l&&this.setTrait(t,l),e.classList.remove("show")}}document.getElementById("buff").onclick=()=>{this.el.modalSetAPBuff.show()};document.getElementById("btn-apply-buff").onclick=()=>{this.applyBuff()};const t=document.querySelectorAll('input[name="method"]');[].slice.call(t).forEach(t=>{t.onchange=()=>{this.calculateAll()}});const e=document.querySelectorAll('select[name="ipt-ap"]');for(let t=0;t<e.length;t++)e[t].onchange=()=>{this.calculateAP(t)};const a=document.querySelectorAll('select[name="weapon-ap"]');for(let t=0;t<a.length;t++)a[t].onchange=()=>{this.calculateAP(t)};const s=document.querySelectorAll('input[name="wap8a"]');for(let t=0;t<s.length;t++)s[t].onchange=()=>{if("fast"===this.state.member[t].trait){const e=document.getElementById("chk-wap20-"+t);e.checked&&(e.checked=!1)}this.calculateAll()};const l=document.querySelectorAll('input[name="wap20"]');for(let t=0;t<l.length;t++)l[t].onchange=()=>{if("fast"===this.state.member[t].trait){const e=document.getElementById("chk-wap8a-"+t);e.checked?(e.checked=!1,this.calculateAll()):this.calculateAP(t)}else this.calculateAP(t)};const r=document.querySelectorAll('input[name="ap-gain"]');for(let t=0;t<r.length;t++)r[t].oninput=function(){this.value>100&&(this.value=100)},r[t].onkeyup=()=>{this.calculateAP(t)};return this},iniModal(){return document.getElementById("btn-close-md").onclick=()=>{this.el.modalSetAPBuff.hide()},new s.a.Tab("tab-buff"),this},bootstrap(){document.getElementById("method-"+this.state.method).checked=!0;for(let t=0;t<this.state.member.length;t++)this.setTrait(t,this.state.member[t].trait);return this},setTrait(t,e){this.el.selectTraits[t].className=this.el.selectTraits[t].className.replace(/fast|strong|alert|tough/,e);document.getElementById("m"+t).style.backgroundColor=l.bg[e];const a=document.getElementById("wap8a-"+t),s=document.getElementById("wap20-"+t),r=document.getElementById("chk-wap8a-"+t),n=document.getElementById("chk-wap20-"+t);r.checked=!1,n.checked=!1;({fast(){a.classList.remove("hide"),s.classList.remove("hide")},strong(){a.classList.remove("hide"),s.classList.add("hide")},alert(){a.classList.add("hide"),s.classList.add("hide")},tough(){a.classList.add("hide"),s.classList.remove("hide")}})[e](),this.state.member[t].trait=e,this.calculateAll()},applyBuff(){this.state.leaderAP=this._applyBuff(this.el.showBuffLeader,this.el.leaderTrait,'input[name="iptl-apa"]:checked'),this.state.towerAP=this._applyBuff(this.el.showBuffTower,this.el.towerTrait,'input[name="iptt-apa"]:checked'),this.el.modalSetAPBuff.hide(),this.calculateAll()},_applyBuff(t,e,a){t.innerHTML="";for(let a=0;a<e.active.length;a++){const s=e.active[a];if(s.match(/all|melee|range/))t.innerHTML+=`<span class="clr-amber">${s}</span> `;else{if(!s.match(/fast|strong|alert|tough/))return!1;t.innerHTML+=`<i class="icon icon-trait i-sm icon-trait-${s}"></i> `}}const s=document.querySelector(a).dataset.txt;return t.innerHTML+=`<span class="clr-lightyellow">${s}</span> AP Atk`,parseFloat(document.querySelector(a).value)},getAPLeader(t){return this.getAPfromBuff(t,this.el.leaderTrait.active,this.state.leaderAP)},getAPTower(t){return this.getAPfromBuff(t,this.el.towerTrait.active,this.state.towerAP)},getAPfromBuff(t,e,a){if("all"===e[0])return a;if("melee"===e[0]&&this.state.member[t].trait.match(/fast|strong/))return a;if("range"===e[0]&&this.state.member[t].trait.match(/alert|tough/))return a;for(let s=0;s<e.length;s++)if(e[s]===this.state.member[t].trait)return a;return 0},getRechargeRate:t=>parseInt(document.getElementById("ipt-ap"+t).value,10),getAPWeapon:t=>parseFloat(document.getElementById("w"+t).value),getAPReceived(t){const e=parseInt(document.getElementById("ipt-gain"+t).value,10)||0,a=this.getAPPercentage(this.getRechargeRate(t),e),s=document.getElementById("apg"+t);return a?(s.classList.add("show"),s.innerHTML="+"+a):s.classList.remove("show"),a},getAPWeapon8All(t){const e=document.querySelectorAll('input[name="wap8a"]:checked');let a=0;for(let s=0;s<e.length;s++){const l=parseInt(e[s].value,10);a+=this.getAPPercentage(this.getRechargeRate(t),l)}const s=document.getElementById("apw8a-"+t);return a?(s.classList.add("show"),s.innerHTML="+"+a):s.classList.remove("show"),a},getAPWeapon20(t){if(this.state.member[t].trait.match(/fast|tough/)){const e=document.getElementById("chk-wap20-"+t),a=document.getElementById("apw20-"+t);if(e.checked){const s=parseInt(e.value,10),l=this.getAPPercentage(this.getRechargeRate(t),s);return l&&(a.classList.add("show"),a.innerHTML="+"+l),l}return a.classList.remove("show"),0}return 0},getMethod:()=>parseFloat(l.methodAPMultiple[document.querySelector('input[name="method"]:checked').value]),getAPPercentage:(t,e)=>Math.ceil(t*parseInt(e,10)/100),calculateAll(){for(let t=0;t<=4;t++)this.calculateAP(t)},calculateAP(t){this.report(t,this.calculateNode(t),this.getAPReceived(t)+this.getAPWeapon8All(t)+this.getAPWeapon20(t))},calculateNode(t){return parseFloat(((l.apAtttack+this.getAPLeader(t)+this.getAPTower(t)+this.getAPWeapon(t))*this.getMethod()).toFixed(2))},report(t,e,a){this.reportFT(t,e,a),this.reportApPerTurn(t,e)},reportFT(t,e,a){const s=document.getElementById("rft"+t),l=this.getRechargeRate(t);let r=0,n=0;for(;n<l;)n+=e,r++;if(a){let t=0;for(;a<l;)a+=e,t++;s.innerHTML=t}else s.innerHTML=r},reportApPerTurn(t,e){document.getElementById("apt"+t).innerHTML=e}}},function(t,e,a){}]);