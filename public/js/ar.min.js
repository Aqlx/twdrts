"use strict";var apAtttack=20,reportArRound=function(e,t,n){var a=document.getElementById("r"+e),o=document.getElementById("rs"+e),c=parseInt(document.getElementById("ipt-ap"+e).value,10);if(n){for(var l=0;n<c;)n+=t,l++;o.innerHTML=l+" / "}else o.innerHTML="";for(var r=0,u=0;u<c;)u+=t,r++;a.innerHTML=r},reportApPerTurn=function(e,t,n){document.getElementById("apt"+e).innerHTML=t+n},reportApFromSpecialWeapon=function(e,t){var n=document.getElementById("sap"+e);n.innerHTML=t?"(+ "+t+")":""},report=function(e,t,n){reportArRound(e,t,n),reportApPerTurn(e,t,n),reportApFromSpecialWeapon(e,n)},calculateNode=function(e){return Math.round((apAtttack+getApFromLeader(e)+getApWeapon(e))*getMethod())},calculateAll=function(){for(var e=0;e<=4;e++)report(e,calculateNode(e),getApSpecialFast(e)+getApSpecialTough(e))},getMethod=function(){return parseFloat(document.querySelector('input[name="method"]:checked').value)},getApFromLeader=function(e){var t=void 0,n=0,a=document.getElementById("t"+e).value,o=document.querySelector('input[name="leader"]:checked').value;return t="fast"===a||"strong"===a?"melee":"alert"===a||"tough"===a?"ranged":void 0,"all"!==o&&a!==o&&t!==o||(n=parseInt(document.querySelector('input[name="leader-ap"]:checked').value,10)),n},getApWeapon=function(e){return parseInt(document.getElementById("w"+e).value,10)},getApSpecialFast=function(e){for(var t=0,n=document.querySelectorAll('input[name="special-apf"]:checked'),a=parseInt(document.getElementById("ipt-ap"+e).value,10),o=0;o<n.length;o++)t+=parseInt(n[o].value,10);return Math.round(a*t/100)},getApSpecialTough=function(e){var t=0,n=document.getElementById("chk-art"+e),a=parseInt(document.getElementById("ipt-ap"+e).value,10);return n.checked&&(t=Math.round(a*parseInt(n.value,10)/100)),t},eMethods=document.querySelectorAll('input[name="method"]'),eLeaders=document.querySelectorAll('input[name="leader"]'),eLeaderAPs=document.querySelectorAll('input[name="leader-ap"]'),eWeaponAPs=document.querySelectorAll('select[name="weapon-ap"]'),eSpecialAPfs=document.querySelectorAll('input[name="special-apf"]'),eSpecialAPts=document.querySelectorAll('input[name="special-apt"]'),eSelectTraits=document.querySelectorAll('select[name="triat"]'),eInputAPs=document.querySelectorAll('input[name="input-ap"]');Array.prototype.slice.call(eMethods).concat(Array.prototype.slice.call(eLeaders),Array.prototype.slice.call(eLeaderAPs),Array.prototype.slice.call(eSpecialAPfs)).forEach(function(e){e.onchange=function(){calculateAll()}});for(var _loop=function(e){eSelectTraits[e].onchange=function(){var t=document.getElementById("spf"+e),n=document.getElementById("spt"+e),a=document.getElementById("chk-arf"+e),o=document.getElementById("chk-art"+e);a.checked=!1,o.checked=!1,{fast:function(){t.classList.remove("hide"),n.classList.add("hide")},strong:function(){t.classList.add("hide"),n.classList.add("hide")},alert:function(){t.classList.add("hide"),n.classList.add("hide")},tough:function(){t.classList.add("hide"),n.classList.remove("hide")}}[this.value](),calculateAll()}},i=0;i<eSelectTraits.length;i++)_loop(i);for(var _loop2=function(e){eWeaponAPs[e].onchange=function(){report(e,calculateNode(e),getApSpecialFast(e)+getApSpecialTough(e))}},i=0;i<eWeaponAPs.length;i++)_loop2(i);for(var _loop3=function(e){eInputAPs[e].onclick=function(){this.select()},eInputAPs[e].onkeyup=function(){report(e,calculateNode(e),getApSpecialFast(e)+getApSpecialTough(e))}},i=0;i<eInputAPs.length;i++)_loop3(i);for(var _loop4=function(e){eSpecialAPts[e].onchange=function(){report(e,calculateNode(e),getApSpecialFast(e)+getApSpecialTough(e))}},i=0;i<eSpecialAPts.length;i++)_loop4(i);calculateAll();